= Single Page App Template (SPAT)
Doc Writer <philip.calouche@outlook.com>
v4.0, 2019-04-11
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:toc:
:source-highlighter: highlightjs
:icons: font

== Background
The purpose of this project was to demonstrate a REST service built on Spring Boot 2 that works with a ReactJS
SPA.  It consists of a login page, a teams page, and a users page. If logged in as the adminUser the teams and
users pages will show controls for adding, editing, and deleting teams and users respectively. This is to
demonstrate permissions. Backend security prevents adding, editing, and deleting in the event a request is made
to do either of those things as a non-admin user.

Some of my goals in this project were to:

. Create an organized and scalable project structure for a Spring Boot application and React JS SPA
. A clear developer workflow
. A clear build path to production
. Web security consisting of a form login, JSON Web Token, and user roles
. Have front end code that warns user if their session is about to expire
. Back end unit testing with the ability to separate unit tests from longer running integration tests during the build process
. Demonstrate multiple types of HTTP requests (GET, POST, DELETE)
. Demonstrate multiple types of database operations (SELECT, UPDATE, DELETE)
. Automatic API documentation (SpringFox Swagger)
. Front end unit testing (Still a work in progress)

== Required Software
* Java 8 (latest JDK was used)
* Node.js

== Technologies and Frameworks
* Java 8 (latest JDK was used)
* Maven 3.6.0
* Spring Boot 2
* Spring Security that utilizes JSON Web Tokens
* H2 in memory database (This can easily be swapped out for another datasource)
* Spring Data JPA
* SpringFox Swagger for API documentation
* JUnit 4 (I have plans to upgrade the tests to use JUnit 5)
* React using Create React App
* Bootstrap 4 for UI styling
* Font Awesome for icons

== Project Structure
The project is a multi module Maven project consisting of two modules:

. *rest-services* - A Spring Boot REST service
. *ui-services* - A Spring Boot web application for hosting the React SPA. This is just one way to host static assets.

== How to Run
[IMPORTANT]
It is assumed that the required software is installed.

. From inside Spring Boot Project POM main directory:
+
  ./mvnw clean verify
+

This may take a few minutes on the first run, and the following will happen:
+
* The rest-services project will run all tests and be built
* The react-ui project will be built
* The ui-services project will run all tests and be built
. Run the REST services executable jar.  This runs at http://localhost:10000
+
  java -jar ./rest-services/target/rest-services.jar

. Run the UI executable jar
+
  java -jar ./ui-services/target/ui-services.jar
+
. Verify UIs are running at http://localhost:10001. Verify login works. Valid users are:
 .. activeUser/password
 .. activeAdmin/password (This user will have edit and delete capabilities)
+
.SPAT Login
image::readmeImages/login.jpg[]
.SPAT Teams Page
image::readmeImages/teams.jpg[]
. Login can also be tested to show that invalid users don't work.  Invalid users are:
 .. expiredUser/password
 .. credentialsExpiredUser/password
 .. lockedUser/password
 .. disabledUser/password
+
.SPAT Bad Login
image::readmeImages/bad-login.jpg[]

== H2 In Memory Database
The application uses the H2 in memory database.  On startup the database is always recreated by DatabaseLoader.java that implements Spring Boot's command
line interface.

There is a web console to the database that can be accessed by going to http://localhost:10000/h2-console and changing the
JDBC URL to *jdbc:h2:mem:spat*.

.H2 Console Login
image::readmeImages/h2-console-login.jpg[]

.H2 Console Main Screen
image::readmeImages/h2-console-main.jpg[]

== Swagger Documentation
Swagger documentation can be viewed when the rest-services application is running by going to http://localhost:10000/swagger-ui.html

.Swager UI
image::readmeImages/swagger-ui.jpg[]

